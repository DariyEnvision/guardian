<div *ngIf="!loading" class="container">
    <div class="header">
        <h1>List of Tokens</h1>
    </div>
    <ng-container *ngIf="isConfirmed; else noDIDSettings">
        <ng-container *ngIf="tokens.length > 0 else noData">
            <div class="table-container">
                <table>
                    <tr class="row-header">
                        <th>Token</th>
                        <th>Associated</th>
                        <th>Token balance</th>
                        <th>Frozen</th>
                        <th>KYCd</th>
                        <th>Policies</th>
                        <th>Tags</th>
                    </tr>
                    <ng-container *ngFor="let token of tokens">
                        <tr class="row-item">
                            <td>
                                {{ token.tokenName }}
                                <hedera-explorer *ngIf="!token.draftToken else draftToken" [params]="token.tokenId"
                                                 type="tokens">{{ token.tokenId }}
                                </hedera-explorer>
                                <ng-template #draftToken>Draft Token</ng-template>
                            </td>
                            <td>
                                <div class="chip-container">
                                    <div class="chip chip-color-{{getColor(token.associated)}}">
                                        {{ token.associated }}
                                    </div>
                                    <div (click)="associate(token)" class="associated-btn">
                                        <img
                                                alt=""
                                                src="assets/images/icons/link.svg"
                                        />
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="chip-container">
                                    {{ token.tokenBalance || 'N/A' }}
                                </div>
                            </td>
                            <td>
                                <div class="chip-container">
                                    <div class="chip chip-color-{{getColor(token.frozen)}}">
                                        {{ token.enableFreeze ? token.frozen : 'N/A' }}
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="chip-container">
                                    <div class="chip chip-color-{{getColor(token.kyc)}}">
                                        {{ token.enableKYC ? token.kyc : 'N/A' }}
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="policies-info">{{ getPoliciesInfo(token.policies) }}</div>
                            </td>
                            <td>
                                <tags-explorer [data]="token._tags" [entity]="tagEntity" [owner]="owner"
                                               [schemas]="tagSchemas" [service]="tagsService"
                                               [target]="token.id"></tags-explorer>
                            </td>
                        </tr>
                    </ng-container>
                </table>
            </div>

            <app-paginator 
                [pageIndex]="pageIndex" 
                [pageSize]="pageSize" 
                [length]="tokensCount"
                (page)="onPage($event)"
            ></app-paginator>

        </ng-container>
    </ng-container>
</div>

<ng-template #noData>
    <div class="not-exist">
        <svg fill="none" height="32" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg">
            <path class="disabled-color" clip-rule="evenodd" d="M2.66699 8C2.66699 6.89543 3.56243 6 4.66699 6C5.77156 6 6.66699 6.89543 6.66699 8C6.66699 9.10457 5.77156 10 4.66699 10C3.56243 10 2.66699 9.10457 2.66699 8ZM9.33366 8.00082C9.3337 7.26444 9.93069 6.66752 10.6671 6.66756L28.0004 6.66852C28.7368 6.66856 29.3337 7.26555 29.3337 8.00193C29.3336 8.73831 28.7366 9.33523 28.0002 9.33519L10.6669 9.33423C9.93054 9.33419 9.33362 8.7372 9.33366 8.00082ZM2.66699 16C2.66699 14.8956 3.56236 14 4.66699 14C5.77163 14 6.66699 14.8956 6.66699 16C6.66699 17.1044 5.77163 18 4.66699 18C3.56236 18 2.66699 17.1044 2.66699 16ZM9.33366 16.0009C9.3337 15.2645 9.93069 14.6676 10.6671 14.6676L28.0004 14.6687C28.7368 14.6687 29.3337 15.2657 29.3337 16.0021C29.3336 16.7385 28.7366 17.3354 28.0002 17.3353L10.6669 17.3343C9.93053 17.3342 9.33361 16.7372 9.33366 16.0009ZM2.66699 24C2.66699 22.8956 3.56236 22 4.66699 22C5.77163 22 6.66699 22.8956 6.66699 24C6.66699 25.1044 5.77163 26 4.66699 26C3.56236 26 2.66699 25.1044 2.66699 24ZM9.33366 24.0009C9.3337 23.2645 9.93069 22.6676 10.6671 22.6676L28.0004 22.6687C28.7368 22.6687 29.3337 23.2657 29.3337 24.0021C29.3336 24.7385 28.7366 25.3354 28.0002 25.3353L10.6669 25.3343C9.93053 25.3342 9.33361 24.7372 9.33366 24.0009Z"
                  fill-rule="evenodd"/>
        </svg>
        <span class="info-text-strong">There were no Tokens created yet</span>
        <span class="info-text">Please create new token to see the data</span>
    </div>
</ng-template>

<ng-template #noDIDSettings>
    <div class="not-exist">
        <span>Before starting work you need to get DID <a [routerLink]="['/profile']">here</a></span>
    </div>
</ng-template>

<ng-template #preloader>
    <div class="preloader-image"></div>
</ng-template>

<!-- todo: why was && !taskId -->
<div *ngIf="loading" class="loading">
    <div class="preloader-image preloader-image-l-size"></div>
</div>
