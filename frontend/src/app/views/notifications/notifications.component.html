<div class="container">
    <ng-container [ngTemplateOutlet]="header"></ng-container>
    <ng-container *ngIf="!loading">
        <ng-container [ngTemplateOutlet]="tableContainer"></ng-container>
    </ng-container>
    <div *ngIf="loading" class="loading">
        <div class="preloader-image preloader-image-l-size"></div>
    </div>
</div>

<ng-template #header>
    <div class="header">
        <h1>Notifications</h1>
    </div>
</ng-template>

<ng-template #tableContainer>
    <ng-container *ngIf="notifications && notifications.length > 0 else noData">
        <div class="table-container">
            <table>
                <colgroup>
                    <col/>
                    <col/>
                    <col/>
                    <col style="width: 100px;"/>
                </colgroup>
                <tr class="row-header">
                    <th>DATE & TIME</th>
                    <th>TYPE</th>
                    <th>TITLE</th>
                    <th>MESSAGE</th>
                    <th>OPERATIONS</th>
                </tr>
                <ng-container *ngFor="let notification of notifications">
                    <tr class="row-item">
                        <td style="min-width: 200px;">{{ notification.updateDate | date: 'yyyy-MM-dd h:mm a' }}</td>
                        <td style="min-width: 200px;">
                            <div [class.p-tag-error]="notification.type === 'ERROR'"
                                 [class.p-tag-grey]="notification.type === 'INFO'"
                                 [class.p-tag-success]="notification.type === 'SUCCESS'"
                                 class="p-tag"
                            >{{ notification.type | titlecase }}
                            </div>
                        </td>
                        <td style="min-width: 250px;">{{ notification.title }}</td>
                        <td style="width: 100%;">{{ notification.message }}</td>
                        <td>
                            <div class="flex flex-sb-c">
                                <div class="flex flex-column-gap-20">
                                    <div (click)="deleteUpToThis(notification.id)" class="cursor-pointer"
                                         pTooltip="Delete up to this point" tooltipPosition="top">
                                        <svg fill="none" height="18"
                                             viewBox="0 0 12 18"
                                             width="12" xmlns="http://www.w3.org/2000/svg">
                                            <path clip-rule="evenodd" d="M6 18C6.47339 18 6.85714 17.5971 6.85714 17.1V6.67279L9.67962 9.6364C10.0144 9.98787 10.5571 9.98787 10.8918 9.6364C11.2265 9.28492 11.2265 8.71508 10.8918 8.3636L6.60609 3.8636C6.27136 3.51213 5.72864 3.51213 5.39391 3.8636L1.10819 8.3636C0.773459 8.71508 0.773459 9.28492 1.10819 9.6364C1.44293 9.98787 1.98564 9.98787 2.32038 9.6364L5.14286 6.67279V17.1C5.14286 17.5971 5.52661 18 6 18ZM0 0.9C0 1.39706 0.383756 1.8 0.857143 1.8H11.1429C11.6162 1.8 12 1.39706 12 0.9C12 0.402945 11.6162 0 11.1429 0H0.857143C0.383756 0 0 0.402945 0 0.9Z"
                                                  fill="#FF432A"
                                                  fill-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <div (click)="viewDetails(notification)" *ngIf="notification.action"
                                         class="cursor-pointer" pTooltip="View Details"
                                         tooltipPosition="top">
                                        <svg class="opacity-icon"
                                             fill="none" height="16"
                                             viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                    class="primary-color"
                                                    d="M2.94226 2.39505C1.3173 2.39505 -2.06679e-08 3.7003 0 5.3104V13.0847C-1.65343e-07 14.6948 1.3173 16 2.94226 16L10.7883 16C12.4133 16 13.7306 14.6948 13.7306 13.0847L13.7306 10.6552C13.7306 10.1185 13.2915 9.68342 12.7498 9.68342C12.2082 9.68342 11.7691 10.1185 11.7691 10.6552V13.0847C11.7691 13.6214 11.33 14.0564 10.7883 14.0564L2.94226 14.0564C2.40061 14.0564 1.96151 13.6214 1.96151 13.0847V5.3104C1.96151 4.7737 2.40061 4.33862 2.94226 4.33862H5.39415C5.93581 4.33862 6.3749 3.90354 6.3749 3.36683C6.3749 2.83013 5.93581 2.39505 5.39415 2.39505H2.94226Z"/>
                                            <path
                                                    class="primary-color"
                                                    d="M6.69727 7.84346C6.31426 8.22296 6.31426 8.83826 6.69727 9.21777C7.08028 9.59727 7.70126 9.59727 8.08426 9.21777L14.0385 3.31802V6.46925C14.0385 7.00595 14.4776 7.44103 15.0192 7.44103C15.5609 7.44103 16 7.00595 16 6.46925L16 0.974997C16.0008 0.725273 15.905 0.475303 15.7127 0.284769C15.5212 0.0950159 15.2702 0.000139911 15.0192 0.000141549L9.47125 0C8.9296 -1.6383e-07 8.4905 0.43508 8.4905 0.971781C8.4905 1.50848 8.9296 1.94356 9.47125 1.94356L12.6516 1.94356L6.69727 7.84346Z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </ng-container>
            </table>
            <div class="table-paginator">
                <span>Items per page:</span>
                <p-dropdown (onChange)="newOnPage()" [(ngModel)]="pageSize" [options]="[10,25,50,100]"></p-dropdown>
                <span class="color-grey-6">{{ pageIndex * pageSize + 1 }}
                    â€“ {{ (pageIndex * pageSize + pageSize) > notificationsCount ? notificationsCount : (pageIndex * pageSize + pageSize) }}
                    of {{ notificationsCount }}</span>
                <div class="flex">
                    <svg (click)="movePageIndex(-1)" fill="none" height="24" viewBox="0 0 24 24" width="24"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                                d="M15.2828 5.68906C14.8923 5.29856 14.2591 5.29856 13.8686 5.68906L8.98115 10.5813C8.20075 11.3625 8.20106 12.6283 8.98184 13.4091L13.8722 18.2994C14.2627 18.6899 14.8959 18.6899 15.2864 18.2994C15.677 17.9089 15.677 17.2757 15.2864 16.8852L11.1008 12.6996C10.7103 12.309 10.7103 11.6759 11.1008 11.2854L15.2828 7.10326C15.6733 6.71276 15.6733 6.07956 15.2828 5.68906Z"
                                fill="#848FA9"/>
                    </svg>
                    <svg (click)="movePageIndex(+1)" fill="none" height="24" viewBox="0 0 24 24" width="24"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                                d="M8.6926 5.68907C9.0831 5.29857 9.7163 5.29857 10.1068 5.68907L14.9942 10.5813C15.7746 11.3625 15.7743 12.6283 14.9936 13.4091L10.1032 18.2994C9.7127 18.6899 9.0795 18.6899 8.689 18.2994C8.2984 17.9089 8.2984 17.2757 8.689 16.8852L12.8746 12.6996C13.2651 12.309 13.2651 11.6759 12.8746 11.2854L8.6926 7.10327C8.3021 6.71277 8.3021 6.07957 8.6926 5.68907Z"
                                fill="#848FA9"/>
                    </svg>
                </div>
            </div>
        </div>
    </ng-container>
</ng-template>

<ng-template #noData>
    <div class="not-exist">
        <svg fill="none" height="32" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg">
            <path class="disabled-color" clip-rule="evenodd" d="M2.66699 8C2.66699 6.89543 3.56243 6 4.66699 6C5.77156 6 6.66699 6.89543 6.66699 8C6.66699 9.10457 5.77156 10 4.66699 10C3.56243 10 2.66699 9.10457 2.66699 8ZM9.33366 8.00082C9.3337 7.26444 9.93069 6.66752 10.6671 6.66756L28.0004 6.66852C28.7368 6.66856 29.3337 7.26555 29.3337 8.00193C29.3336 8.73831 28.7366 9.33523 28.0002 9.33519L10.6669 9.33423C9.93054 9.33419 9.33362 8.7372 9.33366 8.00082ZM2.66699 16C2.66699 14.8956 3.56236 14 4.66699 14C5.77163 14 6.66699 14.8956 6.66699 16C6.66699 17.1044 5.77163 18 4.66699 18C3.56236 18 2.66699 17.1044 2.66699 16ZM9.33366 16.0009C9.3337 15.2645 9.93069 14.6676 10.6671 14.6676L28.0004 14.6687C28.7368 14.6687 29.3337 15.2657 29.3337 16.0021C29.3336 16.7385 28.7366 17.3354 28.0002 17.3353L10.6669 17.3343C9.93053 17.3342 9.33361 16.7372 9.33366 16.0009ZM2.66699 24C2.66699 22.8956 3.56236 22 4.66699 22C5.77163 22 6.66699 22.8956 6.66699 24C6.66699 25.1044 5.77163 26 4.66699 26C3.56236 26 2.66699 25.1044 2.66699 24ZM9.33366 24.0009C9.3337 23.2645 9.93069 22.6676 10.6671 22.6676L28.0004 22.6687C28.7368 22.6687 29.3337 23.2657 29.3337 24.0021C29.3336 24.7385 28.7366 25.3354 28.0002 25.3353L10.6669 25.3343C9.93053 25.3342 9.33361 24.7372 9.33366 24.0009Z"
                  fill-rule="evenodd"/>
        </svg>
        <span class="info-text-strong">No notifications</span>
        <span class="info-text"></span>
    </div>
</ng-template>
